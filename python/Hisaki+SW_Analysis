# import relevant packages
import numpy as np
from astropy.io import fits					#handling of FITS files
import matplotlib.pyplot as plt		#for making plots
from pathlib import Path 
import datetime
import os
import pandas as pd
pd.options.display.max_rows = 9999
import glob
from jarvis import fits_from_glob
from Hisaki_Aurora_Power import HMS
GHROOT = Path(__file__).parents[1]
def fpath(x):
    return os.path.join(GHROOT, x)




aurora_fitspath = glob.glob(r"C:datasets/Hisaki/Aurora Power/*.fits")
torus_fitspath = glob.glob(r"C:datasets/Hisaki/Torus Power/*.fits")
aurora_groups_list = aurora_fitspath[2:43]
torus_groups_list = torus_fitspath[2:43]

power_dawn_all = ([])
power_dusk_all = ([])
testlist = np.array([r"C:datasets\Hisaki\Torus Power\exeuv_torus_20160615_lv03_LT00-24_dt00010_vr01_00.fits"])

for i in torus_groups_list:
    hdul = fits.open(fpath(i))
    time_series_data = hdul[2].data
    time = time_series_data.field('SECOFDAY')
    power_dawn = time_series_data.field('TPOW0710ADAWN')
    power_dusk = time_series_data.field('TPOW0710ADUSK')
    for j in power_dawn:
        power_dawn_all = np.append(power_dawn_all, j)
    for k in power_dusk:
        power_dusk_all = np.append(power_dusk_all, k)

print(power_dawn_all)

#date_list = []
#for f in aurora_fitspath:
    #date = f.split("/")[-1].split("_")[2]
    #dt_date = datetime.datetime.strptime(date, "%Y%m%d")
    #date_list.append(dt_date)
#print([str(d) for d in date_list])



#for i in range(2):
    #aurora_filename = r'C:datasets/Hisaki/Aurora Power/exeuv_aurora_20160506_lv03_LT00-24_dt00010_vr01_00.fits'
    #torus_filename = r'C:datasets/Hisaki/Torus Power/exeuv_torus_20160506_lv03_LT00-24_dt00010_vr01_00.fits'
    #date = aurora_filename.split("/")[-1].split("_")[2]
    #dt_date = datetime.datetime.strptime(date, "%Y%m%d")
    #print(dt_date)
    #next_date = dt_date.replace()

#torus_hdul = fits.open(torus_fitspath)
#aurora_hdul = fits.open(aurora_fitspath)
#intensity_dawn_all = []
#intensity_dusk_all = []

#torus_time_series_data = fits.open(fpath(torus_hdul[2].data))
#aurora_time_series_data = fits.open(fpath(aurora_fitspath[2].data))
#time = torus_time_series_data.field('SECOFDAY')
#intensity_dawn_all = torus_time_series_data.field('TPOW0710ADAWN')
#intensity_dusk_all = torus_time_series_data.field('TPOW0710ADUSK')
#aurora_power = aurora_time_series_data.field('TPOW1190A')
#print(intensity_dawn_all)

